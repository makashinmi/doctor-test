# О проекте
Данный проект — тестовое задание на вакансию разработчика в компанию Dr.Web

Проект представляет собой интерактивное консольное приложение, эмулирующее интерфейс системы управления базой данных 

### ТЗ, по которому разрабатывалось приложение
> Интерактивное консольное приложение, напоминающее интерфейс базы данных. Данные запрашиваются у пользователя в диалоговом режиме (ввод с клавиатуры). Вся "база" находится в оперативной памяти и не сохраняется между сеансами. Одна команда — один запрос. Аргументы команд пробелов не содержат. Также в вводе должен рапознаваться EOF, который означает конец ввода и завершение приложения.
> Также "база" должна поддерживать транзакции. Транзакции могут быть вложенными.


# Содержание
1. [Вступление](#вступление)
2. [Для Dr.Web](#для-dr.web)
3. [Установка и запуск](#установка-и-запуск)
4. [Инструкция пользования](#инструкция-пользования)
5. [Документация](#документация)

# Для Dr.Web
Привет! Задание было несложным и достаточно интересным: реализация транзакций заставила подумать, и я очень доволен решением, к которому пришел. 

Надеюсь, мы с вами в скором времени услышимся (а может и увидимся) на собеседовании! :^)

# Установка и запуск
Проект использует синтаксис, поддерживаемый начиная с Python 3.10+. Тестирование проходило под Manjaro Linux.

Скопируйте репозиторий, используя команду `git clone https:\\github.com\makashinmi\doctor-test.git`, находясь в директории, в которой будет создана корневая папка проекта.

Для запуска проекта воспользуйтесь командой `python main.py` находясь в корневой директории проекта.

# Инструкция пользования
Данная СУБД умеет общаться с использованием следующих команд:

### Базовые команды
- **SET X Y** — задать ключу с именем X значение Y
- **GET X** — вывести значение ключа X
- **UNSET X** — удалить ключ X    
- **COUNTS Y** — вывести количество ключей, хранящих значений Y 
- **FIND Y** — вывести имена ключей, хранящих значение Y
- **END** — завершить работу приложения (игнорирует глубину транзакций) 

### Транзакции
- **BEGIN** — начать транзакцию
- **COMMIT** — применить и завершить транзакцию
- **ROLLBACK** — отменить и завершить транзакцию  

# Документация
### class database.Database() 
Родительский класс для класса Transcation; основной, с которым происходит взаимодействие 
<details><summary>Атрибуты</summary>
<p>

- **storage** (dict) — словарь, непосредственно хранящий данные 

</p>
</details>

<details><summary>Методы</summary>
<p>

#### **counts(**_value_**)** 
Возвращает количество ключей, хранящих переданное значение. 
- Реализован как вызов другого собственного метода **find()** с возвратом длины списка, получаемого в результате вызова.

Параметры:
- **value** (str) — значение, для которого нужно совершить проверку

Возвращает: **int** — количество ключей, хранящих данное значение 

#### **find(**_value_**)**
Возвращает список ключей, хранящих данное значение.

Параметры:
- **value** (str) — значение, для которого нужно совершить поиск

Возвращает: **list** из ключей, хранящих данное значение

#### **get(**_key_**)**
Возвращает значение, лежащее под данным ключом.
- Если ключа нет в хранилище, возвращает строку 'NULL'

Параметры:
- **key** (str) — ключ, для которого нужно вернуть значение

Возвращает: **str** — значение, хранящееся под данным ключом 

#### **set(**_key, value_**)**
Добавляет в хранилище новый ключ и присваивает ему данное значение.
- Если ключ уже есть в хранилище, старое значение заменяется на новое

Параметры:
- **key** (str) — имя ключа
- **value** (str) — значение, присваевамое ключу

Возвращает: _

#### **unset(**_key_**)**
Удаляет данный ключ из хранилища.

Параметры:
- **key** (str) — имя ключа, который требуется удалить

Возвращает: _

</p>
</details>

### **class database.Transaction(Database)** 
Класс, благодаря которому реализуюется функционал транзакций данной СУБД. 

Параметры:
- **database_obj** (database.Database | database.Transcation) — объект базы данных или транзакции, во время использования которого была создана данная транзакция 

<details><summary>Атрибуты</summary>
<p>

- **parent** (database.Database | database.Transaction) — объект, являющийся родителем, контекстом, в котором был создан объект данной транзакции
- **storage** (dict) — хранилище, являющейся поверхностной копией объекта **parent.storage**  

</p>
</details>

<details><summary>Методы</summary>
<p>

#### **commit()**
Переписывает объект **parent.storage** на собственный **storage**

Возвращает: _

</p>
</details>
